---
title: LA11.实现压缩列稀疏矩阵
date: 2025/09/29
categories:
  - 每日一题
tags:
  - AI题库
  - 线性代数
---

#### 难度：简单

实现一个函数来将密集矩阵（dense matrix）转换为压缩列稀疏（Compressed Column Sparse, CCS）格式。CCS 是一种高效存储稀疏矩阵的方法，只存储非零元素及其位置信息。CCS 格式由三个数组组成：

1. values：按列优先顺序存储的非零元素值
2. row_indices：每个非零元素对应的行索引
3. column_pointer：指示每列起始位置的指针数组

- **输入描述**：输入为一个二维列表 dense_matrix，表示待转换的密集矩阵。
- **输出描述**：输出三个列表，分别表示：
  1. values：所有非零元素值的列表，按列优先顺序排列
  2. row_indices：对应每个非零元素的行索引
  3. column_pointer：每列在 values 数组中的起始位置索引（包含最后一列结束位置）

:::: code-group
::: code-group-item 代码框架

```py
def compressed_col_sparse_matrix(dense_matrix):
    return vals, row_idx, col_ptr

if __name__ == "__main__":
    dense_matrix = eval(input())
    vals, row_idx, col_ptr = compressed_col_sparse_matrix(dense_matrix)
    print(vals)
    print(row_idx)
    print(col_ptr)
```

:::

::: code-group-item 示例 1

```py
# 输入：
[[1, 0, 0], [2, 3, 0], [0, 4, 5]]

# 输出：
[1, 2, 3, 4, 5]
[0, 1, 1, 2, 2]
[0, 2, 4, 5]
```

:::
::::

---

#### 解题思路 1：Python 数组手搓

稀疏矩阵的列压缩方法与行压缩很类似，而且这里的输入输出描述更为精确，按照要求写即可。

```py
def compressed_col_sparse_matrix(dense_matrix):
    row = len(dense_matrix[0])
    col = len(dense_matrix)
    vals = []
    row_idx = []
    col_ptr = [0]

    temp = 0
    for i in range(row):
        for j in range(col):
            if dense_matrix[j][i] != 0:
                vals.append(dense_matrix[j][i])
                row_idx.append(j)
                temp += 1
        col_ptr.append(temp)

    return vals, row_idx, col_ptr
```

#### 解题思路 2：Numpy + SciPy

SciPy 的压缩行是 scipy.sparse 模块中的 csr_matrix 函数，压缩列是 ==csc_matrix== 函数。

```py
import numpy as np
from scipy.sparse import csc_matrix

def compressed_col_sparse_matrix(dense_matrix):
  A = np.array(dense_matrix)
  csc = csc_matrix(A)
  vals = csc.data.tolist()
  row_idx = csc.indices.tolist()
  col_ptr = csc.indptr.tolist()

  return vals, row_idx, col_ptr
```
